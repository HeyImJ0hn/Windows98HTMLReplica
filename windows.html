<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
            integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
            crossorigin="anonymous"/>
        <link rel="stylesheet" href="css/style.css"/>

        <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

        <script src="https://kit.fontawesome.com/5448f80af9.js" crossorigin="anonymous"></script>

        <link rel="icon" type="image/png" href="imgs/windows_logo.png"/>

        <title>Windows 98</title>
    </head>
    <body>
        <!-- Desktop Programs -->
        <div class="programs" id="programs">
            <button id="programpc" class="program text-center" ondblclick="openComputer(this)">
                <img id="programcomputer" class="programicon" src="imgs/mycomputer.png" draggable="false"/>
                <p class="programtext">My Computer</p>
            </button><br>

            <button id="programpaint" class="program text-center" ondblclick="openPaint(this)">
                <img class="programicon" src="imgs/mspaint.png" draggable="false"/>
                <p class="programtext">MS Paint</p>
            </button><br>

            <button id="programcrypto" class="program text-center" ondblclick="openCrypto(this)">
                <img class="programicon" src="imgs/crypto.png" draggable="false"/>
                <p class="programtext">CryptoMarket</p>
            </button><br>

            <button id="programweather" class="program text-center" ondblclick="openWeather(this)">
                <img class="programicon" src="imgs/weather.png" draggable="false"/>
                <p class="programtext">Weather</p>
            </button><br>

            <button id="programsnake" class="program text-center" ondblclick="openSnake(this)">
                <img class="programicon" src="imgs/snake_logo.png" draggable="false"/>
                <p class="programtext">Snake</p>
            </button><br>

            <button id="programbin" class="program text-center" ondblclick="openBin()">
                <img class="programicon" src="imgs/bin.png" draggable="false"/>
                <p class="programtext">Recycle Bin</p>
            </button><br>
        </div>

        <!-- Start Menu -->
        <div id="startmenu" class="startmenu">
            <div class="startmenutitle">Windows98</div>
            <div class="startmenuprograms">
                <button class="startmenuprogram" id="startmenucomputer" onclick="openComputer(this)">
                    <div class="row">
                        <div class="col col-sm-3">
                            <img src="imgs/mycomputer.png" />
                        </div>
                        <div class="col">
                            <p class="starttext">My Computer</p>
                        </div>
                    </div>
                </button>
                <button class="startmenuprogram" id="startmenupaint" onclick="openPaint(this)">
                    <div class="row">
                        <div class="col col-sm-3">
                            <img src="imgs/mspaint.png" />
                        </div>
                        <div class="col">
                            <p class="starttext">MS Paint</p>
                        </div>
                    </div>
                </button>
                <button class="startmenuprogram" id="startmenucrypto" onclick="openCrypto(this)">
                    <div class="row">
                        <div class="col col-sm-3">
                            <img src="imgs/crypto.png" />
                        </div>
                        <div class="col">
                            <p class="starttext">CryptoMarket</p>
                        </div>
                    </div>
                </button>
                <button class="startmenuprogram" id="startmenuweather" onclick="openWeather(this)">
                    <div class="row">
                        <div class="col col-sm-3">
                            <img src="imgs/weather.png"/>
                        </div>
                        <div class="col">
                            <p class="starttext">Weather</p>
                        </div>
                    </div>
                </button>
                <button class="startmenuprogram" id="startmenusnake" onclick="openSnake(this)">
                    <div class="row">
                        <div class="col col-sm-3">
                            <img src="imgs/snake_logo.png"/>
                        </div>
                        <div class="col">
                            <p class="starttext">Snake</p>
                        </div>
                    </div>
                </button>
                <div class="divisor"></div>
                <div class="terminatebtn">
                    <!--<button class="startmenuprogram" onclick="toggleStartMenu()">
                        <div class="row">
                            <div class="col col-sm-3">
                                <img src="imgs/shutdown.png" />
                            </div>
                            <div class="col">
                                <p class="starttext">Restart</p>
                            </div>
                        </div>
                    </button>-->
                    <button class="startmenuprogram" onclick="shutdown()">
                        <div class="row">
                            <div class="col col-sm-3">
                                <img src="imgs/shutdown.png" />
                            </div>
                            <div class="col">
                                <p class="starttext">Shutdown</p>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Welcome Window -->
        <div id="welcomepopup" class="wpopup container">
            <div class="popuptitle" id="popuptitle">
                <img src="imgs/Info.png" class="mb-1" width="3%" height="auto" draggable="false">
                Welcome
                <button class="btn closebtn" onclick=closePopUp()>X</button>
            </div>
            <div class="row">
                <div class="col col-lg-8">
                    <div class="popupbody"><p class="subtitle">Welcome to <b>Windows</b><span style="color: white">98</span></p>
                        <div class="popupinfo">
                            <img src="imgs/Info.png">
                            <span class="px-2"><b>Did you know...</b></span>
                            <p>Trabalho realizado no âmbito da cadeira de PCM por:<br>
                            João Pires - A47471<br>
                            31D</p>
                        </div>
                    </div>
                </div>
                <div class="col col-sm-4 text-center">
                    <div class="popupbtns">
                        <button class="btn popupbtn" onclick=throwErrorPopUp()>What's New</button><br>
                        <button class="btn popupbtn px-5" onclick=throwErrorPopUp()>Next Tip</button>
                    </div>
                </div>
            </div>
            <div class="divisor2"></div>
            <button class="btn popupclose" onclick=closePopUp()>Close</button>
        </div>

        <!-- Error Pop Up -->
        <div id="error" class="errorwindow container">
            <div class="popuptitle">Error
                <button class="btn closebtn" onclick=closeError()>X</button>
            </div>
            <div class="errorbody">
                <img src="imgs/error.png"> 
                <span class="px-4">An unexpected error occured.</span>
            </div>
            <div class="btn errorbtn" onclick=closeError()>Ok</div>
        </div>

        <!-- Error Pop Up -->
        <div id="windowpopup" class="windowpopup container">
            <div class="popuptitle">Warning
                <button class="btn closebtn" onclick=closeWindowPopUp()>X</button>
            </div>
            <div class="windowpopupbody text-center">
                <span class="px-4">Your browser is not 1920x947.<br>Please consider using this resolution for the best experience</span>
            </div>
            <div class="btn errorbtn" onclick=closeWindowPopUp()>Ok</div>
        </div>

        <!-- No Permission Pop Up -->
        <div id="nopermission" class="nopermissionwindow container">
            <div class="popuptitle">No Permission
                <button class="btn closebtn" onclick=closeNoPermission()>X</button>
            </div>
            <div class="nopermissionbody">
                <img class="pl-2" src="imgs/warning.png"> 
                <span style="padding-left: 68px">Access Denied.</span>
            </div>
            <div class="btn errorbtn" onclick=closeNoPermission()>Ok</div>
        </div>

        <!-- MS Paint -->
        <div id="mspaint" class="mspaint">
            <div class="popuptitle">
                <img src="imgs/mspaint.png" class="mb-1" width="1%" height="auto" draggable="false">
                MS Paint
                <button class="btn closebtn" onclick=closePaint()>X</button>
            </div>
            <div class="paintmenu" id="paintmenu">
                <button class="paintbtn" id="newbtn" onclick="openPaint(this)"><u>N</u>ew</button>
                <button class="paintbtn" onclick="saveCanvas()"><u>S</u>ave</button>
                <button class="paintbtn" onclick="closePaint()"><u>Q</u>uit</button>
            </div>
            <div class="toolbar" id="toolbar">
                <button class="tool" id="shapesel" disabled>
                    <img src="imgs/mspaint_tools/shape_selection.png">
                </button>
                <button class="tool" id="rectsel" disabled>
                    <img src="imgs/mspaint_tools/rectangle_selection.png">
                </button>
                <button class="tool" id="eraser" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/eraser.png">
                </button>
                <button class="tool" id="bucket" disabled>
                    <img src="imgs/mspaint_tools/bucket.png">
                </button>
                <button class="tool" id="colorp" disabled>
                    <img src="imgs/mspaint_tools/color_picker.png">
                </button>
                <button class="tool" id="mglass" disabled>
                    <img src="imgs/mspaint_tools/magnifying_glass.png">
                </button>
                <button class="tool" id="pencil" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/pencil.png">
                </button>
                <button class="tool" id="brush" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/brush.png">
                </button>
                <button class="tool" id="spray" disabled>
                    <img src="imgs/mspaint_tools/spray.png">
                </button>
                <button class="tool" id="type" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/type.png">
                </button>
                <button class="tool" id="line" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/line.png">
                </button>
                <button class="tool" id="curve" disabled>
                    <img src="imgs/mspaint_tools/curve.png">
                </button>
                <button class="tool" id="square" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/square.png">
                </button>
                <button class="tool" id="shape" disabled>
                    <img src="imgs/mspaint_tools/shape.png">
                </button>
                <button class="tool" id="circle" onclick=toggleButton(this)>
                    <img src="imgs/mspaint_tools/circle.png">
                </button>
                <button class="tool" id="rrectacle" disabled>
                    <img src="imgs/mspaint_tools/round_rectangle.png">
                </button>
                <input type="color" id="color" class="color_selector">
                <span style="font-size: 14px;">Size</span>
                <input type="number" id="size" class="brush_size text-center" value="10" min="1" max="50">
                <input type="text" placeholder="Text" id="textinput" class="mt-1" style="font-size: 14px;" size="5">
                <input type="checkbox" id="stroke" name="stroke">
                <label for="stroke" style="font-size: 14px;">Stroke</label>
            </div>
            <div class="mspaintbody">
                <div class="canvas" id="canvasdiv">
                    <canvas id="canvas" width="1704px" height="792px"></canvas>
                </div>
            </div>
        </div>

        <!-- CryptoMarket -->
        <div id="crypto" class="crypto">
            <div class="popuptitle">
                <img src="imgs/crypto.png" class="mb-1" width="1.5%" height="auto" draggable="false"> 
                CryptoMarket
                <button class="btn closebtn" onclick=closeCrypto()>X</button>
            </div>
            <div class="menu" id="cryptomenu">
                <div class="dropdown">
                    <button class="paintbtn" id="cryptolistbtn" onclick=""><u>C</u>oins <i class="fas fa-sort-down"></i></button>
                    <div class="dropdown-content">
                        <button class="coinbtn" id="btcbtn" onclick="getBTC()">Bitcoin</button>
                        <button class="coinbtn" id="ethbtn" onclick="getETH()">Ethereum</button>
                        <button class="coinbtn" id="bnbbtn" onclick="getBNB()">Binance Coin</button>
                        <button class="coinbtn" id="dogebtn" onclick="getDOGE()">Dogecoin</button>
                    </div>
                </div>
                <input class="searchcrypto" id="searchcrypto" type="text" placeholder="Search Crypto" autocomplete="off">
                <button class="paintbtn" onclick="saveToXML()"><u>S</u>ave</button>
                <button class="paintbtn" onclick="closeCrypto()"><u>Q</u>uit</button>
            </div>
            <div class="cryptobody" id="cryptobody">
                <div class="terminal" id="cryptoterminal">
                    <p>Limited to 100 requests per minute - from CoinGecko.</p>
                    <div class="terminaltext" id="cryptoterminaltext">
                        <pre>
      _____                  _        __  __            _        _   
     / ____|                | |      |  \/  |          | |      | |  
    | |     _ __ _   _ _ __ | |_ ___ | \  / | __ _ _ __| | _____| |_ 
    | |    | '__| | | | '_ \| __/ _ \| |\/| |/ _` | '__| |/ / _ \ __|
    | |____| |  | |_| | |_) | || (_) | |  | | (_| | |  |   <  __/ |_ 
     \_____|_|   \__, | .__/ \__\___/|_|  |_|\__,_|_|  |_|\_\___|\__|
                  __/ | |                                            
                 |___/|_|                                            
                        </pre>
                        <p>Please select/search for a coin.<br>
                        Re-selecting a coin will refresh the data.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weather -->
        <div id="weather" class="weather">
            <div class="popuptitle">
                <img src="imgs/weather.png" class="mb-1" width="1.6%" height="auto" draggable="false"> 
                Weather
                <button class="btn closebtn" onclick=closeWeather()>X</button>
            </div>
            <div class="menu" id="weathermenu">
                <div class="dropdown">
                    <button class="paintbtn" id="citylistbtn" onclick=""><u>C</u>ities <i class="fas fa-sort-down"></i></button>
                    <div class="dropdown-content">
                        <button class="coinbtn" id="btcbtn" onclick="getCity('lisboa')">Lisboa</button>
                        <button class="coinbtn" id="ethbtn" onclick="getCity('porto')">Porto</button>
                        <button class="coinbtn" id="bnbbtn" onclick="getCity('coimbra')">Coimbra</button>
                        <button class="coinbtn" id="dogebtn" onclick="getCity('faro')">Faro</button>
                    </div>
                </div>
                <input class="searchcrypto" id="searchcity" type="text" placeholder="Search City" autocomplete="off">
                <button class="paintbtn" onclick="closeWeather()"><u>Q</u>uit</button>
            </div>
            <div class="cryptobody" id="weatherbody">
                <div class="weatherterminal" id="weatherterminal">
                    <p>Limited to 50 requests per day - from AccuWeather.</p>
                    <div class="terminaltext">
                        <p id="weatherterminaltext">Please select/search for a city.</p>
                        <div class="row">
                            <div class="col" id="weatherterminalcol1"></div>
                            <div class="col"  id="weatherterminalcol2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Snake Game -->
        <div id="snake" class="snake">
            <div class="popuptitle">
                <img src="imgs/snake_logo.png" class="mb-1" width="4%" draggable="false">
                Snake
                <button class="btn closebtn" onclick=closeSnake()>X</button>
            </div>
            <div class="snakecanvas" id="snakecanvasdiv">
                <canvas id="snakecanvas" width="608px" height="608px"></canvas>
            </div>
        </div>

        <!-- My Computer -->
        <div class="mycomputer" id="mycomputer">
            <div class="popuptitle" id="computertitle">
                <img src="imgs/mycomputer.png" class="mb-1" width="2.2%" height="auto" draggable="false">
                My Computer
                <button class="btn closebtn" onclick=closeComputer()>X</button>
            </div>
            <div class="computermenu" id="computermenu">
                <button class="paintbtn"><u>F</u>iles</button>
                <button class="paintbtn"><u>E</u>dit</button>
                <button class="paintbtn"><u>V</u>iew</button>
                <button class="paintbtn"><u>H</u>elp</button>
            </div>
            <div class="computerbody">
                <button id="mypcprogram" class="mypcprogram text-center" ondblclick="throwNoPermissionPopUp()">
                    <img class="mypcprogramicon" src="imgs/folder.png" draggable="false"/>
                    <p class="mypcprogramtext">Program Files</p>
                </button>

                <button id="mypcprogram" class="mypcprogram text-center" ondblclick="throwNoPermissionPopUp()">
                    <img class="mypcprogramicon" src="imgs/folder.png" draggable="false"/>
                    <p class="mypcprogramtext">Windows</p>
                </button>
    
                <button id="mypcprogram" class="mypcprogram text-center" ondblclick="throwNoPermissionPopUp()">
                    <img class="mypcprogramicon" src="imgs/program.png" draggable="false"/>
                    <p class="mypcprogramtext">Command</p>
                </button>
    
                <button id="mypcprogram" class="mypcprogram text-center" ondblclick="throwNoPermissionPopUp()">
                    <img class="mypcprogramicon" src="imgs/windows_doc.png" draggable="false"/>
                    <p class="mypcprogramtext">Autoexec.dos</p>
                </button>
            </div>
            <div class="bottom1 pcbottom">4 object(s) (plus 5 hidden)</div>
            <div class="bottom2 pcbottom">463KB</div>
        </div>

        <!-- Recycle Bin -->
        <div class="recyclebin" id="bin">
            <div class="popuptitle" id="bintitle">
                <img src="imgs/bin.png" class="mb-1" width="2.2%" height="auto" draggable="false">
                Recycle Bin
                <button class="btn closebtn" onclick=closeBin()>X</button>
            </div>
            <div class="computermenu" id="binmenu">
                <button class="paintbtn"><u>F</u>iles</button>
                <button class="paintbtn"><u>E</u>dit</button>
                <button class="paintbtn"><u>V</u>iew</button>
                <button class="paintbtn"><u>H</u>elp</button>
            </div>
            <div class="computerbody">
                <p class="text-center" style="opacity: 50%;">
                    This folder is empty.
                </p>
            </div>
            <div class="bottom1 pcbottom">0 object(s)</div>
            <div class="bottom2 pcbottom">0B</div>
        </div>

        <!-- Clippy -->
        <div id="clippy" class="clippy" style="top: 85%; left: 94%;">
            <div class="speech" id="speech">Hello! I'm clippy, your assistant.</div>
            <img src="imgs/clippy.gif" draggable="false"/>
        </div>

        <!-- Taskbar -->
        <footer id="taskbar">
            <button id="startbtn" class="startbtn" onclick="toggleStartMenu()">
                <img src="imgs/windows_logo.png" width="30%" height="auto" />
                <b>Start</b>
            </button>
            <button id="popuptask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/Info.png" width="18%" height="auto" />
                <b>Welcome</b>
            </button>
            <button id="computertask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/mycomputer.png" width="14%" height="auto" />
                <b>My Computer</b>
            </button>
            <button id="painttask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/mspaint.png" width="15%" height="auto" />
                <b>MSPaint.exe</b>
            </button>
            <button id="cryptotask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/crypto.png" width="12%" height="auto" />
                <b>CryptoMarket.exe</b>
            </button>
            <button id="weathertask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/weather.png" width="18%" height="auto" />
                <b>Weather.exe</b>
            </button>
            <button id="snaketask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/snake_logo.png" width="20%" height="auto" />
                <b>Snake.exe</b>
            </button>
            <button id="bintask" class="taskbtn" onclick=swapBorder(this) active>
                <img src="imgs/bin.png" width="14%" height="auto" />
                <b>Recycle Bin</b>
            </button>
            <span id="datetime"></span>
        </footer>

        <!-- jQuery and Bootstrap Bundle (includes Popper) -->
        <!--<script
            src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"
        ></script>-->
        <!--<script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
            crossorigin="anonymous"
        ></script>-->
        <!-- js -->
        <script src="js/main.js"></script>
        <script src="js/mspaint.js"></script>
        <script src="js/crypto.js"></script>
        <script src="js/weather.js"></script>
        <script src='js/gamemanager.js'></script>
        <script src='js/game.js'></script>
        <script src='js/snake.js'></script>

        <script src="jquery/jquery-3.5.1.min.js"></script>
        <script>
            setInterval(function() {
                let date = new Date(); // Format "Tue Feb 09 2021 13:53:09 GMT+0000 (Western European Standard Time)"
                date = date.toString();
                date = date.split(' ');
                date = date[4];
                let hour = date.split(':')[0];
                let minutes = date.split(':')[1];
                document.getElementById("datetime").innerHTML = hour + ':' + minutes;
            }, 1000);
        </script>
        <script>
            $(document).ready(function(){
                $("#searchcrypto").keypress(function(e) {
                    if(e.key == 'Enter') // 13 == Return
                        searchCrypto();
                });
                $("#searchcity").keypress(function(e) {
                    if(e.key == 'Enter')
                        getCity();
                });
            });
        </script>
        <script>
            if ($(window).width() < 1920 || $(window).height() < 947) {
                windowPopUp();
            }
        </script>
    </body>
</html>
